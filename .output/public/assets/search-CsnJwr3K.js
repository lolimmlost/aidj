import{c as z,r as I,k as Q,j as t,L as q}from"./main-Jnb6I3g-.js";import{u as w}from"./useQuery-BfVrW5pL.js";import{s as F}from"./navidrome-BTrOeuFz.js";function P(){const e=z.c(41),[l,R]=I.useState(""),{playSong:A}=Q();let r,o;e[0]!==l?(r=["search",l],o=()=>F(l.trim(),0,50),e[0]=l,e[1]=r,e[2]=o):(r=e[1],o=e[2]);const C=l.trim().length>0;let h;e[3]!==r||e[4]!==o||e[5]!==C?(h={queryKey:r,queryFn:o,enabled:C},e[3]=r,e[4]=o,e[5]=C,e[6]=h):h=e[6];const{data:x,isLoading:m,error:p}=w(h);let g;e[7]!==x?(g=x===void 0?[]:x,e[7]=x,e[8]=g):g=e[8];const n=g;let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=i=>{console.log("Input change:",i.target.value),R(i.target.value)},e[9]=f):f=e[9];const T=f;let y;e[10]!==A||e[11]!==n?(y=i=>{A(i,n)},e[10]=A,e[11]=n,e[12]=y):y=e[12];const D=y;if(p){let i;e[13]===Symbol.for("react.memo_cache_sentinel")?(i={padding:"20px"},e[13]=i):i=e[13];let W;return e[14]!==p.message?(W=t.jsxs("div",{style:i,children:["Error searching: ",p.message]}),e[14]=p.message,e[15]=W):W=e[15],W}let u,b,j,v;e[16]===Symbol.for("react.memo_cache_sentinel")?(j={padding:"20px",maxWidth:"800px",margin:"0 auto"},v=t.jsx("h1",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"20px"},children:"Search Music Library"}),u={marginBottom:"20px"},b=t.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Test Input:"}),e[16]=u,e[17]=b,e[18]=j,e[19]=v):(u=e[16],b=e[17],j=e[18],v=e[19]);let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S={width:"100%",maxWidth:"400px",padding:"10px",border:"2px solid #ccc",borderRadius:"4px",fontSize:"16px",outline:"none"},e[20]=S):S=e[20];let s;e[21]!==l?(s=t.jsx("input",{type:"text",placeholder:"Type here to test...",value:l,onChange:T,style:S}),e[21]=l,e[22]=s):s=e[22];let _;e[23]===Symbol.for("react.memo_cache_sentinel")?(_={marginTop:"10px",fontSize:"14px",color:"#666"},e[23]=_):_=e[23];const E=m?"Yes":"No";let d;e[24]!==l||e[25]!==n.length||e[26]!==E?(d=t.jsxs("div",{style:_,children:['Debug: Query = "',l,'" (length: ',l.length,") | Songs: ",n.length," | Loading: ",E]}),e[24]=l,e[25]=n.length,e[26]=E,e[27]=d):d=e[27];let a;e[28]!==s||e[29]!==d?(a=t.jsxs("div",{style:u,children:[b,s,d]}),e[28]=s,e[29]=d,e[30]=a):a=e[30];let k;e[31]===Symbol.for("react.memo_cache_sentinel")?(k={marginBottom:"20px"},e[31]=k):k=e[31];let B;e[32]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("div",{style:k,children:t.jsx(q,{to:"/dashboard",style:{color:"#3b82f6",textDecoration:"none"},children:"← Back to Dashboard"})}),e[32]=B):B=e[32];let c;e[33]!==D||e[34]!==m||e[35]!==l||e[36]!==n?(c=m?t.jsx("div",{style:{textAlign:"center",padding:"40px"},children:t.jsx("div",{children:"Loading..."})}):l.trim().length===0?t.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Enter a search term above to find songs in your library."}):n.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:[t.jsxs("h3",{children:['No results found for "',l,'"']}),t.jsxs("p",{style:{marginTop:"10px"},children:['Try different keywords. Debug: Query="',l,'", Length=',l.length]})]}):t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:"20px",fontWeight:"bold"},children:["Found ",n.length," songs"]}),t.jsx("div",{style:{marginBottom:"20px"},children:n.map(i=>t.jsx("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"15px",marginBottom:"10px",cursor:"pointer",backgroundColor:"#f9f9f9"},onClick:()=>D(i.id),children:t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx("div",{style:{width:"40px",textAlign:"right",marginRight:"15px",color:"#666"},children:i.track}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:i.name}),t.jsxs("div",{style:{fontSize:"14px",color:"#666"},children:["Duration: ",Math.floor(i.duration/60),":",(i.duration%60).toString().padStart(2,"0")]})]}),t.jsx("div",{style:{marginLeft:"15px",color:"#666"},children:"▶"})]})},i.id))})]}),e[33]=D,e[34]=m,e[35]=l,e[36]=n,e[37]=c):c=e[37];let L;return e[38]!==a||e[39]!==c?(L=t.jsxs("div",{style:j,children:[v,a,B,c]}),e[38]=a,e[39]=c,e[40]=L):L=e[40],L}export{P as component};
